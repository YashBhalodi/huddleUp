<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      type="text/javascript"
      src="https://miro.com/app/static/sdk.1.1.js"
    ></script>
  </head>
  <body>
    <h2>Permission to read and write to your board?</h2>
    <button>Grant Permission</button>
    <script>
      document.querySelector("button").addEventListener("click", function () {
        const authorizeOptions = {
          response_type: "code",
          redirect_uri: "/confirm-app-install/",
        };

        miro
          .authorize(authorizeOptions)
          .then(() => miro.getToken())
          .then((token) => {
            if (token) {
              miro.board.ui.closeModal("success");
            } else {
              console.log("Something went wrong");
            }
          });
      });
    </script>
  </body>
</html>
